{{/*  Inner artwork for "Frame Graph: Theory" thumbnail.
      Receives dict: .id (SVG-ID namespace)  */}}
{{ $id := .id }}

{{/* ── Extra defs ──────────────────────────────────────────── */}}
<defs>
  <linearGradient id="line-{{ $id }}" x1="0" y1="0" x2="1" y2="0">
    <stop offset="0%" stop-color="#35e7ff"/>
    <stop offset="100%" stop-color="#68ff9a"/>
  </linearGradient>
  <linearGradient id="fgBlue-{{ $id }}" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#69a9ff"/>
    <stop offset="100%" stop-color="#2f6ee5"/>
  </linearGradient>
  <linearGradient id="fgOrange-{{ $id }}" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#f8c32f"/>
    <stop offset="100%" stop-color="#e48a05"/>
  </linearGradient>
  <linearGradient id="fgGreen-{{ $id }}" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#44d97a"/>
    <stop offset="100%" stop-color="#22b55f"/>
  </linearGradient>
  <linearGradient id="fgRed-{{ $id }}" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#ff6a6a"/>
    <stop offset="100%" stop-color="#ef2f3e"/>
  </linearGradient>
  <marker id="fgArrow-{{ $id }}" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto" markerUnits="strokeWidth">
    <path d="M0,0 L7,2.5 L0,5 z" fill="#5c6b80"/>
  </marker>
</defs>

{{/* ── Left side: tagline + sparkline + progress bar ───────── */}}
<rect x="54" y="214" width="760" height="2" fill="url(#line-{{ $id }})" opacity=".75"/>
<text x="54" y="270" fill="#e8f0ff" font-family="Inter,system-ui,sans-serif"
  font-size="36" font-weight="800">Declare → Compile → Execute</text>
<text x="54" y="316" fill="#b2c2de" font-family="Inter,system-ui,sans-serif"
  font-size="24">DAG scheduling · Barrier generation · Memory aliasing</text>

{{/* ── Right side: reference-style DAG graph (no box) ──────── */}}
<g transform="translate(950,36) scale(0.88)">
  {{/* Edges */}}
  <g stroke="#49556a" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#fgArrow-{{ $id }})" opacity=".92">
    <path d="M270,86 V122 H95 V140"/>
    <path d="M270,86 V122 H445 V140"/>
    <path d="M95,226 V270 H255 V378"/>
    <path d="M445,226 V252"/>
    <path d="M445,226 V302 H285 V378"/>
    <path d="M445,338 V356 H285 V378"/>
    <path d="M255,474 V512"/>
    <path d="M255,608 V634"/>
  </g>

  {{/* Nodes */}}
  <rect x="180" y="0" width="180" height="86" rx="43" fill="url(#fgBlue-{{ $id }})"/>
  <rect x="0" y="140" width="190" height="86" rx="43" fill="url(#fgBlue-{{ $id }})"/>
  <rect x="350" y="140" width="190" height="86" rx="43" fill="url(#fgBlue-{{ $id }})"/>
  <rect x="350" y="252" width="190" height="86" rx="43" fill="url(#fgOrange-{{ $id }})"/>
  <rect x="140" y="378" width="230" height="96" rx="48" fill="url(#fgOrange-{{ $id }})"/>
  <rect x="140" y="512" width="230" height="96" rx="48" fill="url(#fgGreen-{{ $id }})"/>
  <rect x="185" y="634" width="140" height="72" rx="36" fill="url(#fgRed-{{ $id }})"/>

  {{/* Node labels */}}
  <g fill="#f5f8ff" font-family="Inter,system-ui,sans-serif" font-size="34" font-weight="700" text-anchor="middle">
    <text x="270" y="56">Z-Prepass</text>
    <text x="95" y="195">Shadows</text>
    <text x="445" y="195">GBuffer</text>
    <text x="445" y="307">SSAO</text>
    <text x="255" y="440">Lighting</text>
    <text x="255" y="574">PostProcess</text>
    <text x="255" y="683">Present</text>
  </g>
</g>
