/* ═══════════════════════════════════════════════════════════════
   UNIFIED COMPONENT CLASSES
   Replaces recurring inline styles across articles.
   Colour comes from --ds-* tokens in schemes/deepspark.css.

   Class-naming conventions:
     ds-*        Shared components (badge, nav, card, power-bar)
     fg-*        Frame Graph article-specific (hoverable)
     diagram-*   Static diagram styles (bars, pipeline, box, etc.)
     widget-*    Interactive widget shared UI (header, btn, body)
     [name]-*    Widget-specific (dag-, topo-, async-, barrier-,
                 alias-, pipe-)
     flow-*      SVG flow-charging system (lg, md, mini, green)
     code-*      Code shortcode styles (diff, collapse, compile)
     sc-*        Series card (homepage)
   ═══════════════════════════════════════════════════════════════ */

/* ═══ Hide theme's default <h1> title on pages with custom heroes ═══ */
article:has(.about-hero) #single_header,
article:has(.contact-hero) #single_header {
  display: none;
}

/* ═══ GLOBAL: smooth-scroll, font-smoothing, selection ═══════ */
html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}
::selection { background: rgba(var(--ds-accent-rgb), .25); color: inherit; }

/* ═══ SPA-like View Transitions (Chromium 111+) ═══════════════ */
@view-transition { navigation: auto; }
::view-transition-old(root) {
  animation: ds-vt-fadeOut .18s ease-in forwards;
}
::view-transition-new(root) {
  animation: ds-vt-fadeIn .22s ease-out forwards;
}
@keyframes ds-vt-fadeOut {
  to { opacity: 0; transform: translateY(4px); }
}
@keyframes ds-vt-fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ═══ Scroll-triggered reveal system ═══════════════════════════ */
.ds-reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity .55s cubic-bezier(.22,1,.36,1), transform .55s cubic-bezier(.22,1,.36,1);
  will-change: opacity, transform;
}
.ds-reveal.ds-visible {
  opacity: 1;
  transform: translateY(0);
}
/* Full-bleed elements already use translateX(-50%); compose both transforms */
.about-band.ds-reveal,
.contact-hero.ds-reveal {
  transform: translateX(-50%) translateY(20px);
}
.about-band.ds-reveal.ds-visible,
.contact-hero.ds-reveal.ds-visible {
  transform: translateX(-50%) translateY(0);
}
/* Stagger children: each subsequent .ds-reveal delays slightly */
.ds-reveal:nth-child(2) { transition-delay: .06s; }
.ds-reveal:nth-child(3) { transition-delay: .12s; }
.ds-reveal:nth-child(4) { transition-delay: .18s; }
.ds-reveal:nth-child(5) { transition-delay: .24s; }
.ds-reveal:nth-child(6) { transition-delay: .3s; }

/* ═══ Link underline animation ════════════════════════════════ */
.article-content a:not([class]),
.prose a:not([class]) {
  text-decoration: none;
  background-image: linear-gradient(var(--ds-accent), var(--ds-accent));
  background-size: 0% 1.5px;
  background-position: 0 100%;
  background-repeat: no-repeat;
  transition: background-size .25s ease, color .2s ease;
}
.article-content a:not([class]):hover,
.prose a:not([class]):hover {
  background-size: 100% 1.5px;
  color: var(--ds-accent);
}

/* ── Sticky header: compact sizing + frosted glass ─────────── */
.fixed.inset-x-0.z-100 {
  background: rgba(11, 11, 14, 0.6);
  backdrop-filter: saturate(1.2) blur(16px);
  -webkit-backdrop-filter: saturate(1.2) blur(16px);
  border-bottom: 1px solid rgba(var(--ds-accent-rgb), .1);
  transition: background .3s ease, box-shadow .3s ease;
}
.fixed.inset-x-0.z-100:hover {
  background: rgba(11, 11, 14, 0.72);
}
.main-menu { padding-top: .25rem; padding-bottom: .25rem; }
.main-menu .header-icon { max-height: 2rem; max-width: 2rem; transition: transform .2s ease; }
.main-menu .header-icon:hover { transform: scale(1.05); }
.main-menu .logo { max-height: 1.4rem; max-width: 10rem; transition: opacity .2s ease; }
.main-menu .logo:hover { opacity: .85; }
.min-h-\[148px\] { min-height: 56px !important; }

/* ── Homepage series card (sc-*) ──────────────────────────── */
.sc {
  margin: 1.5em 0 2.5em;
  border-radius: 14px;
  border: 1px solid rgba(var(--ds-accent-rgb), .12);
  overflow: hidden;
  background: linear-gradient(135deg, rgba(var(--ds-accent-rgb), .03), transparent 70%);
  transition: border-color .3s ease, box-shadow .3s ease;
  position: relative;
}
.sc::before {
  content: '';
  position: absolute; inset: -1px; border-radius: 15px;
  background: linear-gradient(90deg, transparent 25%, rgba(var(--ds-accent-rgb), .15) 50%, transparent 75%);
  background-size: 200% 100%;
  animation: shimmer 5s ease-in-out infinite;
  pointer-events: none;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude; -webkit-mask-composite: xor;
  padding: 1px;
  opacity: 0;
  transition: opacity .5s ease;
}
.sc:hover::before { opacity: 1; }
.sc:hover {
  border-color: rgba(var(--ds-accent-rgb), .22);
  box-shadow: 0 8px 32px rgba(var(--ds-accent-rgb), .06);
}
.sc-header {
  padding: 1em 1.4em;
  border-bottom: 1px solid rgba(var(--ds-accent-rgb), .08);
  display: flex;
  align-items: center;
  gap: .8em;
  flex-wrap: wrap;
}
.sc-title {
  font-weight: 800;
  font-size: 1.08em;
  letter-spacing: -.01em;
}
.sc-subtitle {
  font-size: .82em;
  opacity: .45;
  letter-spacing: .01em;
}
.sc-tags { margin-left: auto; display: flex; gap: .4em; }
.sc-tag {
  font-size: .7em;
  padding: .2em .55em;
  border-radius: 5px;
  border: 1px solid rgba(var(--ds-accent-rgb), .12);
  background: rgba(var(--ds-accent-rgb), .04);
  font-weight: 600;
  letter-spacing: .02em;
  transition: background .2s ease, border-color .2s ease;
}
.sc-tag:hover {
  background: rgba(var(--ds-accent-rgb), .1);
  border-color: rgba(var(--ds-accent-rgb), .25);
}
.sc-parts { display: grid; gap: 0; }
.sc-part {
  display: flex;
  align-items: center;
  gap: 1em;
  padding: .95em 1.4em;
  border-bottom: 1px solid rgba(var(--ds-accent-rgb), .06);
  cursor: pointer;
  text-decoration: none !important;
  color: inherit !important;
  transition: background .2s ease, box-shadow .18s ease;
  position: relative;
}
.sc-part:last-child { border-bottom: none; }
.sc-part:hover {
  background: rgba(var(--ds-accent-rgb), .03);
  box-shadow: inset 3px 0 0 var(--ds-accent);
}
.sc-part:active { transform: scale(.997); }
.sc-num {
  width: 2.1em; height: 2.1em;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  color: #fff; font-weight: 800; font-size: .82em; flex-shrink: 0;
  transition: transform .25s cubic-bezier(.34,1.56,.64,1), box-shadow .25s ease;
}
.sc-part:hover .sc-num {
  transform: scale(1.12);
  box-shadow: 0 0 14px rgba(var(--ds-accent-rgb), .2);
}
.sc-body { flex: 1; min-width: 0; }
.sc-part-title {
  font-weight: 700; font-size: .95em;
  transition: color .2s ease;
}
.sc-part:hover .sc-part-title { color: var(--ds-accent); }
.sc-desc { font-size: .82em; opacity: .55; line-height: 1.55; margin-top: .15em; }
.sc-read {
  font-size: .76em; opacity: .35; flex-shrink: 0; font-weight: 500;
  transition: opacity .2s ease;
}
.sc-part:hover .sc-read { opacity: .6; }
.sc-progress {
  padding: .6em 1.4em;
  border-top: 1px solid rgba(var(--ds-accent-rgb), .08);
  background: rgba(var(--ds-accent-rgb), .015);
  display: flex; align-items: center; gap: .6em;
}
.sc-bar {
  width: 100%; height: 3px; border-radius: 2px;
  background: rgba(var(--ds-accent-rgb), .07);
  overflow: hidden;
}
.sc-bar-fill {
  width: 100%; height: 100%; border-radius: 2px;
  background: linear-gradient(90deg, var(--ds-accent), var(--ds-warm), var(--ds-info), var(--ds-highlight));
}
.sc-count { font-size: .72em; opacity: .4; white-space: nowrap; font-weight: 600; }

/* ── Posts page hierarchy: Frame Graph series ───────────────── */
.ds-posts-series {
  margin: 1.2em 0 1.8em;
  border: 0;
  background: transparent;
  border-radius: 0;
  overflow: visible;
  content-visibility: auto;
  contain-intrinsic-size: auto 620px;
}
.ds-posts-series-grid {
  display: grid;
  gap: 1.6em;
  padding: 0;
  width: 100%;
  grid-template-columns: repeat(2, minmax(300px, 1fr));
  justify-content: stretch;
}
/* Staggered card entrance — each card fades in sequentially */
.ds-posts-series-card.ds-reveal:nth-child(1) { transition-delay: 0s; }
.ds-posts-series-card.ds-reveal:nth-child(2) { transition-delay: .12s; }
.ds-posts-series-card.ds-reveal:nth-child(3) { transition-delay: .24s; }
.ds-posts-series-card.ds-reveal:nth-child(4) { transition-delay: .36s; }
.ds-posts-series-card {
  display: block;
  width: auto;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(var(--ds-accent-rgb), .08);
  background: rgba(14, 16, 22, .6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  text-decoration: none;
  color: inherit;
  box-shadow: 0 4px 20px rgba(2, 8, 18, .3), inset 0 1px 0 rgba(255,255,255,.03);
  transition: transform .22s ease, border-color .22s ease, box-shadow .22s ease;
}
.ds-posts-series-card:hover {
  text-decoration: none;
  transform: translateY(-3px);
  border-color: rgba(var(--ds-accent-rgb), .18);
  box-shadow: 0 12px 36px rgba(2, 8, 18, .45), 0 0 0 1px rgba(var(--ds-accent-rgb), .06);
}
/* ── Unified inline-SVG thumbnail ─────────────────────────── */
.ds-thumbnail-svg {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 0;
  box-shadow: none;
  transition: transform .28s ease, box-shadow .28s ease, filter .28s ease;
}
.ds-posts-series-card:hover .ds-thumbnail-svg {
  transform: scale(1.02);
  filter: saturate(1.03);
}

/* ── Card info block (below thumbnail) ───────────────────────── */
.ds-posts-card-info {
  padding: .45em 1em .75em;
}
.ds-posts-card-part {
  font-size: .68rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  display: block;
  margin-bottom: .3em;
}
.ds-posts-card-title {
  font-size: 1.05em;
  font-weight: 700;
  line-height: 1.3;
  margin: 0 0 .35em !important;
  color: rgba(255, 255, 255, .92);
}
.ds-posts-card-summary {
  font-size: .82em;
  line-height: 1.55;
  opacity: .5;
  margin: 0 0 .6em;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.ds-posts-card-meta {
  font-size: .7rem;
  opacity: .35;
  display: flex;
  align-items: center;
  gap: .4em;
  font-weight: 500;
}
.ds-posts-card-dot {
  opacity: .5;
}

.ds-posts-series-body {
  padding: .55em .05em 0;
}
.ds-posts-series-meta {
  margin: 0 0 .22em;
  font-size: .68rem;
  line-height: 1.2;
  letter-spacing: .07em;
  text-transform: uppercase;
  font-weight: 700;
  opacity: .65;
}
.ds-posts-series-title {
  margin: 0;
  font-size: clamp(1rem, .95vw, 1.18rem);
  font-weight: 700;
  line-height: 1.2;
  color: inherit;
}
.ds-posts-series-desc {
  margin: 0;
  font-size: .88em;
  line-height: 1.6;
  opacity: .75;
}
:is(.dark,.scheme-congo) .ds-posts-series-card {
  background: rgba(14, 16, 22, .6);
}
@media (max-width: 700px) {
  .ds-posts-series-grid {
    grid-template-columns: minmax(220px, 1fr);
    gap: 1em;
    padding: .5em 0;
  }
}
/* ── Footer: break out of body max-width ─────────────────────── */
#site-footer {
  width: 100vw !important;
  margin-left: calc(-50vw + 50%) !important;
  box-sizing: border-box;
}

/* ── Article prev/next footer navigation ─────────────────────── */
.ds-article-footer {
  margin: 2em 0 0;
  padding: 1em 1.2em;
  border-radius: 10px;
  border: 1px solid rgba(var(--ds-indigo-rgb), .15);
  background: rgba(var(--ds-indigo-rgb), .03);
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: .9em;
  gap: 1em;
}
.ds-article-footer a {
  text-decoration: none;
  font-weight: 600;
  transition: color .15s;
}
.ds-article-footer a:hover {
  color: var(--ds-accent);
}

/* ── Badge / pill tag ────────────────────────────────────────── */
.ds-badge {
  display: inline-block;
  font-size: .68em;
  font-weight: 700;
  padding: .15em .55em;
  border-radius: 9px;
  white-space: nowrap;
}
.ds-badge--info    { background: rgba(var(--ds-info-rgb), .1);    color: var(--ds-info-light); }
.ds-badge--code    { background: rgba(var(--ds-code-rgb), .1);    color: var(--ds-code-light); }
.ds-badge--success { background: rgba(var(--ds-success-rgb), .1); color: var(--ds-success); }
.ds-badge--solid-success { background: var(--ds-success); color: #fff; }

.ds-badge--loc {
  font-size: .65em;
  padding: .15em .5em;
}

/* ── Skill-tag pills (about.md timeline) ─────────────────────── */
.ds-tag {
  font-size: .75em;
  padding: .2em .55em;
  border-radius: 5px;
  font-weight: 600;
}
.ds-tag--accent    { border: 1px solid rgba(var(--ds-accent-rgb), .18);    background: rgba(var(--ds-accent-rgb), .06);    color: rgba(var(--ds-accent-rgb), .85); }
.ds-tag--highlight { border: 1px solid rgba(var(--ds-highlight-rgb), .18); background: rgba(var(--ds-highlight-rgb), .06); color: rgba(var(--ds-highlight-rgb), .85); }
.ds-tag--warm      { border: 1px solid rgba(var(--ds-warm-rgb), .18);      background: rgba(var(--ds-warm-rgb), .06);      color: rgba(var(--ds-warm-rgb), .85); }

/* ── Timeline structural helpers (about.md) ──────────────────── */
.tl-entry       { position: relative; margin-bottom: 2.2em; }
.tl-entry:last-child { margin-bottom: 0; }
.tl-dot         { position: absolute; left: -2.9em; top: .15em; width: 1.4em; height: 1.4em; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.tl-dot-active  { background: linear-gradient(135deg, var(--ds-soft), var(--ds-accent)); }
.tl-dot-past    { background: rgba(var(--ds-accent-rgb), .3); }
.tl-dot-early   { background: rgba(var(--ds-accent-rgb), .2); }
.tl-dot__inner  { width: .5em; height: .5em; border-radius: 50%; background: #fff; }
.tl-company     { font-weight: 800; font-size: 1.08em; }
.tl-role        { font-size: .82em; opacity: .55; margin: .15em 0 .5em; }
.tl-body        { font-size: .92em; line-height: 1.7; }
.tl-tags        { display: flex; flex-wrap: wrap; gap: .4em; margin-top: .6em; }
.badge-current  { font-size: .78em; padding: .18em .6em; border-radius: 5px; background: rgba(var(--ds-highlight-rgb), .12); color: var(--ds-highlight); font-weight: 600; }

/* ── Grid layout utilities ───────────────────────────────────── */
.ds-grid-2col { display: grid; grid-template-columns: 1fr 1fr; gap: 1em; margin: 1.2em 0; }
.ds-grid-3col { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0; }
.ds-grid-4col { display: grid; grid-template-columns: repeat(4, 1fr); gap: .6em; margin: 1.2em 0; }

/* ── Card header / body (comparison panels, info boxes) ──────── */
.ds-card {
  border-radius: 10px;
  overflow: hidden;
}
.ds-card--info    { border: 1.5px solid rgba(var(--ds-info-rgb), .3); }
.ds-card--code    { border: 1.5px solid rgba(var(--ds-code-rgb), .3); }
.ds-card--success { border: 1.5px solid rgba(var(--ds-success-rgb), .3); }
.ds-card--warn    { border: 1.5px solid rgba(var(--ds-warn-rgb), .3); }
.ds-card--danger  { border: 1.5px solid rgba(var(--ds-danger-rgb), .3); }

.ds-card-header {
  padding: .6em .9em;
  font-weight: 800;
  font-size: .95em;
}
.ds-card-header--info    { background: rgba(var(--ds-info-rgb), .08);    border-bottom: 1px solid rgba(var(--ds-info-rgb), .15);    color: var(--ds-info-light); }
.ds-card-header--code    { background: rgba(var(--ds-code-rgb), .08);    border-bottom: 1px solid rgba(var(--ds-code-rgb), .15);    color: var(--ds-code-light); }
.ds-card-header--success { background: rgba(var(--ds-success-rgb), .08); border-bottom: 1px solid rgba(var(--ds-success-rgb), .15); color: var(--ds-success); }
.ds-card-header--warn    { background: rgba(var(--ds-warn-rgb), .08);    border-bottom: 1px solid rgba(var(--ds-warn-rgb), .15);    color: var(--ds-warn); }
.ds-card-header--danger  { background: rgba(var(--ds-danger-rgb), .08);  border-bottom: 1px solid rgba(var(--ds-danger-rgb), .15);  color: var(--ds-danger); }

.ds-card-body {
  padding: .7em .9em;
  font-size: .88em;
  line-height: 1.7;
}

/* ── Muted utility ───────────────────────────────────────────── */
.ds-muted { opacity: .5; }

/* ── MVP timeline progress bar ───────────────────────────────── */
.ds-power-bar {
  height: 8px;
  border-radius: 4px;
  background: rgba(127, 127, 127, .08);
  overflow: hidden;
}
.ds-power-bar__fill {
  height: 100%;
  border-radius: 4px;
}
.ds-power-bar__fill--info    { width: 20%;  background: var(--ds-info); }
.ds-power-bar__fill--v2      { width: 65%;  background: linear-gradient(90deg, var(--ds-info), var(--ds-code)); }
.ds-power-bar__fill--full    { width: 100%; background: linear-gradient(90deg, var(--ds-info), var(--ds-code), var(--ds-success)); }

.ds-power-bar__labels {
  display: flex;
  justify-content: space-between;
  margin-top: .25em;
  font-size: .6em;
  opacity: .4;
  font-weight: 600;
}

/* ── Timeline dot (vertical timelines) ───────────────────────── */
.ds-dot {
  position: absolute;
  width: 2.3em;
  height: 2.3em;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: .72em;
  color: #fff;
  z-index: 1;
}
.ds-dot--info    { background: var(--ds-info); }
.ds-dot--code    { background: var(--ds-code); }
.ds-dot--success { background: var(--ds-success); }

/* ── MVP card (timeline version cards) ───────────────────────── */
.ds-mvp-card {
  padding: .8em 1em;
  border-radius: 10px;
  transition: all .2s ease;
}
.ds-mvp-card--info {
  border: 1.5px solid rgba(var(--ds-info-rgb), .2);
  background: rgba(var(--ds-info-rgb), .04);
}
.ds-mvp-card--code {
  border: 1.5px solid rgba(var(--ds-code-rgb), .2);
  background: rgba(var(--ds-code-rgb), .04);
}
.ds-mvp-card--success {
  border: 2px solid rgba(var(--ds-success-rgb), .3);
  background: rgba(var(--ds-success-rgb), .04);
}

.ds-mvp-card__title {
  display: flex;
  align-items: baseline;
  gap: .5em;
  margin-bottom: .3em;
}
.ds-mvp-card__title--info    > span:first-child { font-weight: 900; font-size: 1em;   color: var(--ds-info-light); }
.ds-mvp-card__title--code    > span:first-child { font-weight: 900; font-size: 1em;   color: var(--ds-code-light); }
.ds-mvp-card__title--success > span:first-child { font-weight: 900; font-size: 1.05em; color: var(--ds-success); }

.ds-mvp-card__desc {
  font-size: .84em;
  line-height: 1.5;
  opacity: .85;
  margin-bottom: .5em;
}

.ds-mvp-card__tags {
  display: flex;
  flex-wrap: wrap;
  gap: .35em;
  margin-bottom: .6em;
}

/* ── Full-width layout overrides ─────────────────────────────── */

/* Widen the outer page container (theme default: max-w-7xl = 1280px).
   Using a large but finite value so margin:auto still centres the page. */
body {
  max-width: 1560px !important;
}

/* Widen article header (theme default: max-w-prose → 65ch) */
#single_header {
  max-width: 96rem !important;
  padding-bottom: 1.4em;
  border-bottom: 1px solid rgba(255, 255, 255, .06);
  margin-bottom: .5em;
}
#single_header h1 {
  font-size: clamp(1.8rem, 3.5vw, 2.6rem);
  font-weight: 800;
  letter-spacing: -.02em;
  line-height: 1.15;
  margin-bottom: .3em;
}
/* Article meta (date, reading time) */
#single_header .text-neutral-500,
#single_header .dark\:text-neutral-400 {
  font-size: .82rem;
  letter-spacing: .02em;
  opacity: .5;
}

/* ── Breadcrumb trail (UE-docs inspired) ─────────────────────── */
.ds-breadcrumb {
  display: flex;
  align-items: center;
  gap: .35em;
  font-size: .72rem;
  font-family: ui-monospace, SFMono-Regular, monospace;
  letter-spacing: .03em;
  margin-bottom: .8em;
  padding: .2em 0;
}
.ds-breadcrumb-link {
  color: rgba(255, 255, 255, .35);
  text-decoration: none;
  transition: color .15s;
}
.ds-breadcrumb-link:hover {
  color: var(--ds-accent);
  text-decoration: none;
}
.ds-breadcrumb-sep {
  color: rgba(255, 255, 255, .15);
  font-size: .85em;
  user-select: none;
}
.ds-breadcrumb-current {
  color: rgba(255, 255, 255, .55);
  font-weight: 600;
}

/* Widen article body text (theme default: max-w-prose �? 65ch) */
.article-content {
  max-width: 92rem !important;
}

/* Improve readability of long-form text on wide layouts */
.article-content p,
.article-content li {
  max-width: 82ch;
}

/* Keep diagrams/callouts free to span width */
.article-content .ds-grid-2col,
.article-content .ds-grid-3col,
.article-content .ds-grid-4col,
.article-content .diagram-flow,
.article-content .diagram-box,
.article-content .diagram-flat,
.article-content .diagram-scene,
.article-content .diagram-macro,
.article-content .diagram-ftable,
.article-content .ds-posts-series,
.article-content .fg-reveal,
.article-content .interactive-widget {
  max-width: none;
}

/* Widen list-page content area (same constraint as article body) */
section.prose > div.max-w-prose {
  max-width: none !important;
}

/* Subtle page-load polish */
main > article,
main > section {
  animation: ds-fade-up .4s cubic-bezier(.22,1,.36,1);
}

@keyframes ds-fade-up {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Heading hierarchy (UE-docs inspired: clean, generous) ── */
.article-content h2 {
  position: relative;
  padding-bottom: .4em;
  margin-top: 3.2em;
  margin-bottom: 1.1em;
  letter-spacing: -.01em;
  /* Subtle top separator for visual section breaks */
  padding-top: 1em;
  border-top: 1px solid rgba(255, 255, 255, .04);
}
/* First h2 after header — no top border needed */
.article-content > h2:first-of-type {
  border-top: none;
  padding-top: 0;
  margin-top: 2em;
}
/* No bottom accent underline — UE docs uses clean separators above only */
.article-content h2::after {
  display: none;
}
.article-content h3 {
  margin-top: 2.4em;
  margin-bottom: .8em;
}
.article-content h4 {
  margin-top: 1.8em;
  margin-bottom: .6em;
}

/* ── Image treatment (clean — no hover effects, UE-docs style) */
.article-content img:not(.nozoom) {
  border-radius: 6px;
}

/* ── Blockquote: subtle, technical ──────────────────────────── */
.article-content blockquote {
  border-left: 3px solid var(--ds-accent);
  background: rgba(var(--ds-accent-rgb), .03);
  padding: 1em 1.4em;
  border-radius: 0 6px 6px 0;
  margin: 1.8em 0;
  font-style: normal;
  opacity: .88;
  font-size: .97em;
}

/* ── Code inline: dark pill style (UE-docs) ─────────────────── */
.article-content code:not(.chroma):not([class*="cd-"]) {
  background: rgba(255, 255, 255, .1);
  border: 1px solid rgba(255, 255, 255, .06);
  border-radius: 5px;
  padding: .15em .5em;
  font-size: .85em;
  font-weight: 500;
  font-family: ui-monospace, SFMono-Regular, 'Cascadia Code', 'Consolas', monospace;
}

/* ── Horizontal rule: quiet separator ───────────────────────── */
.article-content hr,
.prose hr {
  border: none;
  height: 1px;
  background: rgba(255, 255, 255, .08);
  margin: 3em 0;
}

/* ── Code blocks: clean rounded container (UE-docs style) ──── */
.highlight-wrapper {
  border: 1px solid rgba(255, 255, 255, .07);
  border-radius: 8px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, .22);
  position: relative;
  overflow: hidden;
}
.highlight-wrapper pre {
  padding: 1em 1.2em !important;
  font-size: .85em !important;
  line-height: 1.65 !important;
}
.highlight-wrapper code {
  font-family: ui-monospace, SFMono-Regular, 'Cascadia Code', 'Consolas', monospace;
}

/* ── Line numbers: UE-docs gutter ────────────────────────────── */
.highlight .lntable {
  width: 100%;
  border-spacing: 0;
  border-collapse: collapse;
  margin: 0;
  table-layout: auto;
}
.highlight .lntd {
  vertical-align: top;
  padding: 0;
  border: none;
}
/* Line number column */
.highlight .lntd:first-child {
  width: 1px;
  white-space: nowrap;
  user-select: none;
  -webkit-user-select: none;
}
.highlight .lntd:first-child pre {
  padding: 1em .7em 1em .9em !important;
  background: rgba(255, 255, 255, .015) !important;
  border-right: 1px solid rgba(255, 255, 255, .06);
  margin: 0;
}
/* Line number spans — right-aligned like UE docs */
.highlight .lnt,
.highlight .ln {
  color: rgba(255, 255, 255, .2);
  font-size: .82em;
  font-family: ui-monospace, SFMono-Regular, 'Cascadia Code', 'Consolas', monospace;
  font-variant-numeric: tabular-nums;
  line-height: 1.65;
  display: block;
  text-align: right;
}
/* Code column */
.highlight .lntd:last-child pre {
  padding: 1em 1.2em !important;
  margin: 0;
}
/* Keep .highlight tables from getting prose styles */
.prose .lntable,
.article-content .lntable {
  margin: 0 !important;
  border: none !important;
  box-shadow: none !important;
}
.prose .lntable th,
.prose .lntable td,
.article-content .lntable th,
.article-content .lntable td {
  padding: 0 !important;
  border: none !important;
  background: transparent !important;
}
.prose .lntable tr:hover,
.article-content .lntable tr:hover {
  background: transparent !important;
}

/* ── Code block language label ───────────────────────────────── */
.highlight-wrapper .copy-button {
  position: absolute;
  top: .5em;
  right: .5em;
  z-index: 5;
  opacity: .3;
  transition: opacity .15s;
  background: rgba(255, 255, 255, .06);
  border: 1px solid rgba(255, 255, 255, .08);
  border-radius: 4px;
  color: inherit;
  padding: .25em .5em;
  font-size: .72em;
  font-family: ui-monospace, SFMono-Regular, monospace;
  cursor: pointer;
}
.highlight-wrapper:hover .copy-button {
  opacity: .6;
}
.highlight-wrapper .copy-button:hover {
  opacity: 1;
  background: rgba(var(--ds-accent-rgb), .12);
}

/* ── Strong / emphasis: slightly lighter weight ──────────────── */
.article-content strong {
  font-weight: 700;
  color: rgba(255, 255, 255, .95);
}
.article-content em {
  font-style: italic;
  color: rgba(255, 255, 255, .8);
}

/* ── Paragraph spacing: more breathing room ──────────────────── */
.article-content p {
  margin-bottom: 1.4em;
  line-height: 1.85;
}
.article-content li {
  line-height: 1.75;
  margin-bottom: .3em;
}

/* ── Lists: clean indentation ────────────────────────────────── */
.article-content ul,
.article-content ol {
  margin-bottom: 1.6em;
  padding-left: 1.4em;
}

@media (prefers-reduced-motion: reduce) {
  main > article,
  main > section {
    animation: none !important;
  }
  .ds-reveal {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }
  .sc::before { animation: none !important; }
}

/* ═══════════════════════════════════════════════════════════════
   UE-DOCS INSPIRED: Posts page, article chrome, tables, progress
   ═══════════════════════════════════════════════════════════════ */

/* ── Reading progress bar (top of page) ──────────────────────── */
.ds-progress-bar {
  position: fixed;
  top: 0;
  left: 0;
  width: 0%;
  height: 2px;
  background: linear-gradient(90deg, var(--ds-accent), var(--ds-highlight));
  z-index: 9999;
  transition: width .1s linear;
  pointer-events: none;
}

/* ── Back-to-top button ──────────────────────────────────────── */
.ds-back-to-top {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, .1);
  background: rgba(11, 11, 14, .85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  color: rgba(255, 255, 255, .6);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  transform: translateY(12px);
  transition: opacity .25s ease, transform .25s ease, background .15s ease, border-color .15s ease;
  z-index: 900;
  pointer-events: none;
}
.ds-back-to-top.ds-visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}
.ds-back-to-top:hover {
  background: rgba(var(--ds-accent-rgb), .12);
  border-color: rgba(var(--ds-accent-rgb), .3);
  color: var(--ds-accent);
}
.ds-back-to-top svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  fill: none;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* ── Posts page hero section ─────────────────────────────────── */
.ds-posts-hero {
  margin: -.5em 0 2.5em;
  padding: 2.8em 0 2.2em;
  border-bottom: 1px solid rgba(255, 255, 255, .06);
  position: relative;
}
.ds-posts-hero::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  width: 3em;
  height: 2px;
  background: var(--ds-accent);
  border-radius: 2px;
  opacity: .5;
}
.ds-posts-hero-label {
  font-size: .72rem;
  font-weight: 700;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: var(--ds-accent);
  margin: 0 0 .6em;
  opacity: .8;
}
.ds-posts-hero-title {
  font-size: clamp(2rem, 4vw, 3rem) !important;
  font-weight: 800;
  letter-spacing: -.025em;
  line-height: 1.1;
  margin: 0 0 .6em !important;
  color: rgba(255, 255, 255, .95);
  padding: 0;
  border: 0;
}
.ds-posts-hero-title::before,
.ds-posts-hero-title::after {
  display: none;
}
.ds-posts-hero-desc {
  font-size: 1.05em;
  line-height: 1.7;
  max-width: 68ch;
  margin: 0;
  opacity: .6;
}

/* ── Posts page section header ───────────────────────────────── */
.ds-posts-section {
  margin: 0 0 .8em;
}
.ds-posts-section-header {
  display: flex;
  align-items: flex-start;
  gap: 1em;
  padding: .4em 0;
}
.ds-posts-section-marker {
  width: 3px;
  min-height: 2.8em;
  border-radius: 2px;
  background: var(--ds-accent);
  opacity: .5;
  flex-shrink: 0;
  margin-top: .2em;
}
.ds-posts-section-title {
  font-size: 1.3em !important;
  font-weight: 700;
  margin: 0 0 .25em !important;
  letter-spacing: -.01em;
  color: rgba(255, 255, 255, .9);
  padding: 0;
  border: 0;
}
.ds-posts-section-title::before,
.ds-posts-section-title::after {
  display: none;
}
.ds-posts-section-desc {
  font-size: .9em;
  line-height: 1.65;
  opacity: .5;
  margin: 0;
  max-width: 72ch;
}
.ds-posts-section-count {
  margin-left: auto;
  font-size: .72rem;
  font-weight: 600;
  letter-spacing: .08em;
  text-transform: uppercase;
  opacity: .35;
  white-space: nowrap;
  padding-top: .3em;
}

/* ── Posts series cards: refined grid ────────────────────────── */
.ds-posts-series-card {
  position: relative;
}
.ds-posts-series-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, .06);
  pointer-events: none;
  transition: border-color .2s ease;
}
.ds-posts-series-card:hover::after {
  border-color: rgba(var(--ds-accent-rgb), .2);
}

/* ── Series navigation banner: refined ───────────────────────── */
.ds-series-nav {
  margin: 0 0 2em;
  padding: .65em 1.2em;
  border-radius: 8px;
  background: rgba(255, 255, 255, .025);
  border: 1px solid rgba(255, 255, 255, .06);
  font-size: .82em;
  line-height: 1.6;
  opacity: .75;
}
.ds-series-nav a {
  font-weight: 600;
  transition: color .15s ease;
}
.ds-series-nav a:hover {
  color: var(--ds-accent);
}

/* ── Heading anchors: subtle accent, appear on hover ─────────── */
.article-content h2 .group-hover\:opacity-100,
.article-content h3 .group-hover\:opacity-100,
.article-content h4 .group-hover\:opacity-100 {
  opacity: 0 !important;
  transition: opacity .2s ease;
}
.article-content h2:hover .group-hover\:opacity-100,
.article-content h3:hover .group-hover\:opacity-100,
.article-content h4:hover .group-hover\:opacity-100 {
  opacity: .35 !important;
}
.article-content h2:hover .group-hover\:opacity-100:hover,
.article-content h3:hover .group-hover\:opacity-100:hover,
.article-content h4:hover .group-hover\:opacity-100:hover {
  opacity: .7 !important;
}
.article-content h2 .group-hover\:opacity-100 a,
.article-content h3 .group-hover\:opacity-100 a,
.article-content h4 .group-hover\:opacity-100 a {
  color: var(--ds-accent) !important;
  font-weight: 400;
}

/* ── Table styling: clean, technical (UE-docs inspired) ──────── */
.article-content table,
.prose table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.6em 0;
  font-size: .88em;
  line-height: 1.6;
}
.article-content thead th,
.prose thead th {
  text-align: left;
  font-weight: 700;
  font-size: .78em;
  letter-spacing: .06em;
  text-transform: uppercase;
  padding: .7em 1em;
  border-bottom: 2px solid rgba(var(--ds-accent-rgb), .2);
  color: rgba(255, 255, 255, .7);
  white-space: nowrap;
}
.article-content tbody td,
.prose tbody td {
  padding: .65em 1em;
  border-bottom: 1px solid rgba(255, 255, 255, .04);
  vertical-align: top;
}
.article-content tbody tr:hover,
.prose tbody tr:hover {
  background: rgba(255, 255, 255, .02);
}
/* Alternating row tint */
.article-content tbody tr:nth-child(even),
.prose tbody tr:nth-child(even) {
  background: rgba(255, 255, 255, .015);
}
.article-content tbody tr:nth-child(even):hover,
.prose tbody tr:nth-child(even):hover {
  background: rgba(255, 255, 255, .035);
}

/* ── Custom scrollbar for code blocks ────────────────────────── */
.highlight-wrapper pre::-webkit-scrollbar {
  height: 6px;
}
.highlight-wrapper pre::-webkit-scrollbar-track {
  background: transparent;
}
.highlight-wrapper pre::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, .12);
  border-radius: 3px;
}
.highlight-wrapper pre::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, .22);
}
/* Firefox scrollbar */
.highlight-wrapper pre {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, .12) transparent;
}

/* ── Callout: UE-docs icon-left horizontal layout ────────────── */
.ds-callout {
  margin: 1.6em 0;
  padding: 1.1em 1.3em;
  border-radius: 10px;
  font-size: .92em;
  line-height: 1.7;
  border: none;
  border-left: none;
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: .9em;
}
/* Icon column — pseudo-element with SVG */
.ds-callout::before {
  flex-shrink: 0;
  display: block;
  margin-top: .15em;
  line-height: 1;
}
/* Icon-only (no text labels) — matches UE docs pattern */
.ds-callout--info::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2358a6ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3Cpath d='M12 16v-4'/%3E%3Cpath d='M12 8h.01'/%3E%3C/svg%3E");
}
.ds-callout--success::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%234ec9b0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M22 11.08V12a10 10 0 1 1-5.93-9.14'/%3E%3Cpolyline points='22 4 12 14.01 9 11.01'/%3E%3C/svg%3E");
}
.ds-callout--warn::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23e5c07b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z'/%3E%3Cline x1='12' y1='9' x2='12' y2='13'/%3E%3Cline x1='12' y1='17' x2='12.01' y2='17'/%3E%3C/svg%3E");
}
.ds-callout--danger::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f44747' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolygon points='7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2'/%3E%3Cline x1='12' y1='8' x2='12' y2='12'/%3E%3Cline x1='12' y1='16' x2='12.01' y2='16'/%3E%3C/svg%3E");
}
.ds-callout--info    { background: rgba(var(--ds-info-rgb), .06); }
.ds-callout--success { background: rgba(var(--ds-success-rgb), .06); }
.ds-callout--warn    { background: rgba(var(--ds-warn-rgb), .06); }
.ds-callout--danger  { background: rgba(var(--ds-danger-rgb), .06); }
/* Callout paragraph spacing */
.ds-callout p {
  margin: 0 0 .5em 0;
}
.ds-callout p:last-child {
  margin-bottom: 0;
}
.ds-callout code {
  background: rgba(255, 255, 255, .1);
  padding: .15em .45em;
  border-radius: 4px;
  font-size: .88em;
}
.ds-callout a {
  color: var(--ds-accent);
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* ── Article content first paragraph: slightly larger ────────── */
.article-content > p:first-of-type {
  font-size: 1.08em;
  line-height: 1.8;
  opacity: .85;
}

/* ── Article footer: sharing links area ──────────────────────── */
.article-content + div .sharing-links,
footer.pt-8 {
  border-top: 1px solid rgba(255, 255, 255, .06);
  padding-top: 1.5em;
}

/* ── Figure captions ─────────────────────────────────────────── */
.article-content figure {
  margin: 2em 0;
}
.article-content figcaption {
  text-align: center;
  font-size: .8em;
  opacity: .45;
  margin-top: .6em;
  font-style: italic;
}

/* ── Nested list hierarchy ───────────────────────────────────── */
.article-content ul ul,
.article-content ol ol,
.article-content ul ol,
.article-content ol ul {
  margin-top: .3em;
  margin-bottom: .3em;
}
.article-content ul > li::marker {
  color: rgba(var(--ds-accent-rgb), .4);
}

/* ── Tag / taxonomy badges (UE-docs style dark pills) ────────── */
.flex.flex-row.flex-wrap.items-center a[href*="/tags/"] > span > span,
.flex.flex-row.flex-wrap.items-center a[href*="/categories/"] > span > span {
  background: rgba(255, 255, 255, .07) !important;
  border: 1px solid rgba(255, 255, 255, .10) !important;
  color: rgba(255, 255, 255, .55) !important;
  border-radius: 999px !important;
  padding: .2em .85em !important;
  font-size: .75rem !important;
  font-weight: 500 !important;
  letter-spacing: .03em;
  text-transform: lowercase;
  transition: background .2s, color .2s, border-color .2s;
}
.flex.flex-row.flex-wrap.items-center a[href*="/tags/"]:hover > span > span,
.flex.flex-row.flex-wrap.items-center a[href*="/categories/"]:hover > span > span {
  background: rgba(var(--ds-accent-rgb), .12) !important;
  border-color: rgba(var(--ds-accent-rgb), .25) !important;
  color: rgba(255, 255, 255, .8) !important;
}
/* Container spacing */
.flex.flex-row.flex-wrap.items-center:has(a[href*="/tags/"]),
.flex.flex-row.flex-wrap.items-center:has(a[href*="/categories/"]) {
  gap: .4em;
  margin-top: 1.5em;
  padding-top: 1.2em;
  border-top: 1px solid rgba(255, 255, 255, .06);
}

/* ── Article-level responsive refinements ────────────────────── */
@media (max-width: 768px) {
  .ds-posts-hero {
    padding: 1.8em 0 1.4em;
  }
  .ds-posts-hero-title {
    font-size: 1.8rem;
  }
  .ds-posts-section-header {
    flex-direction: column;
    gap: .5em;
  }
  .ds-posts-section-count {
    margin-left: 0;
  }
  #single_header h1 {
    font-size: 1.6rem;
  }
  .ds-back-to-top {
    bottom: 1rem;
    right: 1rem;
  }
}

/* ── Collapsible code blocks (include-code shortcode) ────────── */

.code-collapse {
  margin: 1em 0;
  border-radius: 0.5rem;
  overflow: hidden;
}

/* The entire summary (label + preview) is one big click target */
.code-collapse > summary {
  cursor: pointer;
  list-style: none;
  position: relative;
  display: block;
}

.code-collapse > summary::-webkit-details-marker {
  display: none;
}

.code-collapse > summary::marker {
  display: none;
  content: "";
}

.code-collapse-label {
  display: flex;
  align-items: center;
  gap: 0.5em;
  padding: 0.5em 1em;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.85em;
  font-weight: 600;
  color: var(--color-neutral-400);
}

.code-collapse-hint {
  font-weight: 400;
  font-size: 0.85em;
  opacity: 0.6;
}

/* Preview body: holds the highlighted code + fade overlay */
.code-preview-body {
  position: relative;
  overflow: hidden;
}
/* Hide line numbers in collapsed preview — they're confusing at partial view */
.code-preview-body .lntd:first-child {
  display: none;
}
.code-preview-body .lntable {
  margin: 0;
}

/* Fade overlay at the bottom of the preview */
.code-fade-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3.5em;
  background: linear-gradient(transparent, var(--color-neutral-800, #1e1e1e));
  pointer-events: none;
}

/* Hover effect — make it obvious the block is clickable */
.code-collapse > summary:hover .code-preview-body {
  outline: 2px solid rgba(var(--ds-info-rgb), 0.4);
  outline-offset: -2px;
  border-radius: 0 0 0.5rem 0.5rem;
}

.code-collapse > summary:hover .code-collapse-label {
  color: var(--ds-info-light);
}

/* When expanded: hide the preview body, show the full code */
.code-collapse[open] > summary .code-preview-body {
  display: none;
}

.code-collapse[open] > summary .code-collapse-hint {
  display: none;
}

.code-collapse[open] > summary .code-collapse-label::after {
  content: "(click to collapse)";
  font-weight: 400;
  font-size: 0.85em;
  opacity: 0.6;
}

/* When expanded, full code body is also clickable to collapse */
.code-collapse[open] > .highlight {
  cursor: pointer;
}

.code-collapse[open] > .highlight:hover {
  outline: 2px solid rgba(var(--ds-danger-rgb), 0.3);
  outline-offset: -2px;
  border-radius: 0 0 0.5rem 0.5rem;
}

/* ── Compact code-block mode ──────────────────────────────── */
.code-collapse-compact {
  margin: .5em 0;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(var(--ds-code-rgb),.2);
  background: rgba(var(--ds-code-rgb),.04);
}

.code-collapse-compact > summary {
  cursor: pointer;
  list-style: none;
  display: block;
}

.code-collapse-compact > summary::-webkit-details-marker { display: none; }
.code-collapse-compact > summary::marker { display: none; content: ""; }

.code-compact-bar {
  display: flex;
  align-items: center;
  gap: .5em;
  padding: .45em .9em;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: .82em;
  color: var(--color-neutral-400);
  transition: background .15s;
}

.code-collapse-compact > summary:hover .code-compact-bar {
  background: rgba(var(--ds-code-rgb),.08);
}

.code-compact-icon {
  font-size: 1.1em;
  line-height: 1;
}

.code-compact-name {
  font-weight: 700;
  color: var(--color-neutral-200, #e5e5e5);
}

.code-compact-meta {
  opacity: .55;
  font-size: .88em;
  margin-right: auto;
}

.code-compact-expand {
  font-size: .85em;
  opacity: .5;
  transition: opacity .15s;
}

.code-collapse-compact > summary:hover .code-compact-expand {
  opacity: .9;
  color: var(--ds-code-light);
}

.code-collapse-compact[open] .code-compact-expand {
  display: none;
}

.code-compact-actions {
  display: flex;
  gap: .35em;
}

.compile-btn-sm,
.godbolt-btn-sm {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: .78em;
  font-weight: 600;
  padding: .25em .6em;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background .15s, opacity .15s;
}

.compile-btn-sm {
  background: var(--ds-success);
  color: #fff;
}
.compile-btn-sm:hover { background: var(--ds-success-dark); }
.compile-btn-sm:disabled { opacity: .5; cursor: wait; }

.godbolt-btn-sm {
  background: rgba(var(--ds-info-rgb),.15);
  color: var(--ds-info-light);
}
.godbolt-btn-sm:hover { background: rgba(var(--ds-info-rgb),.3); }
.godbolt-btn-sm:disabled { opacity: .5; cursor: wait; }

.code-collapse-compact[open] > .highlight {
  cursor: pointer;
  border-top: 1px solid rgba(var(--ds-code-rgb),.15);
}

.code-collapse-compact[open] > .highlight:hover {
  outline: 2px solid rgba(var(--ds-danger-rgb), 0.3);
  outline-offset: -2px;
}

.code-compact + .compile-output {
  margin-top: 0;
}

/* Light mode gradient */
@media (prefers-color-scheme: light) {
  .code-fade-overlay {
    background: linear-gradient(transparent, var(--color-neutral-100, #f5f5f5));
  }
  .code-compact-name {
    color: var(--color-neutral-700, #374151);
  }
  .code-collapse-compact {
    background: rgba(var(--ds-code-rgb),.03);
  }
}

/* ── Compile & Run buttons / output ──────────────────────────── */
.code-actions {
  display: flex;
  gap: 0.5em;
  margin: -0.5em 0 0 0;
  padding: 0.5em 1em;
}

.compile-btn,
.godbolt-btn {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.8em;
  font-weight: 600;
  padding: 0.4em 1em;
  border: none;
  border-radius: 0.375rem;
  cursor: pointer;
  transition: background 0.15s, opacity 0.15s;
}

.compile-btn {
  background: var(--ds-success);
  color: #fff;
}
.compile-btn:hover:not(:disabled) {
  background: var(--ds-success-dark);
}

.godbolt-btn {
  background: var(--color-neutral-600, #525252);
  color: #fff;
}
.godbolt-btn:hover:not(:disabled) {
  background: var(--color-neutral-500, #737373);
}

.compile-btn:disabled,
.godbolt-btn:disabled {
  opacity: 0.6;
  cursor: wait;
}

/* ── Compilation output — improved visibility ────────────────── */
.compile-output {
  display: none;
  margin: 0.25em 0 1em 0;
  padding: 1em 1.2em;
  background: #0d1117;
  color: #c9d1d9;
  border-radius: 0.5rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.85em;
  line-height: 1.7;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-word;
  border-left: 4px solid var(--ds-success);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  max-height: 600px;
  overflow-y: auto;
}

@media (prefers-color-scheme: light) {
  .compile-output {
    background: #1e1e2e;
    color: #cdd6f4;
  }
}

/* ── Styled diagram replacements for ASCII art ───────────────── */

/* Pipeline: vertical or horizontal multi-stage */
.diagram-pipeline {
  display: flex;
  gap: 0.75em;
  flex-wrap: wrap;
  margin: 1em 0;
}
.diagram-pipeline .dp-stage {
  flex: 1;
  min-width: 150px;
  padding: 0.75em 1em;
  border-radius: 0.5rem;
  border: 2px solid var(--ds-info);
  background: rgba(var(--ds-info-rgb),0.06);
  font-size: 0.82em;
}
:is(.dark,.scheme-congo) .diagram-pipeline .dp-stage {
  background: rgba(var(--ds-info-rgb),0.1);
  border-color: var(--ds-info);
}
.diagram-pipeline .dp-stage .dp-title {
  font-weight: 700;
  font-family: ui-monospace, SFMono-Regular, monospace;
  margin-bottom: 0.3em;
  color: var(--ds-info-light);
}
.diagram-pipeline .dp-stage ul {
  margin: 0;
  padding-left: 1.2em;
  line-height: 1.6;
}

/* Box: bordered container with title */
.diagram-box {
  margin: 1em 0;
  border: 2px solid var(--color-neutral-300, #d4d4d4);
  border-radius: 0.5rem;
  overflow: hidden;
  font-size: 0.85em;
}
:is(.dark,.scheme-congo) .diagram-box {
  border-color: var(--color-neutral-600);
}
.diagram-box .db-title {
  padding: 0.5em 1em;
  font-weight: 700;
  font-family: ui-monospace, SFMono-Regular, monospace;
  background: var(--color-neutral-100, #f5f5f5);
  border-bottom: 2px solid var(--color-neutral-300, #d4d4d4);
}
:is(.dark,.scheme-congo) .diagram-box .db-title {
  background: var(--color-neutral-800);
  border-color: var(--color-neutral-600);
}
.diagram-box .db-body {
  padding: 0.75em 1em;
  line-height: 1.7;
}

/* Bar chart: horizontal bars with labels */
.diagram-bars {
  margin: 1em 0;
  display: grid;
  grid-template-columns: 120px 1fr 60px;
  gap: 0.4em 0.75em;
  align-items: center;
  font-size: 0.82em;
  font-family: ui-monospace, SFMono-Regular, monospace;
}
.diagram-bars .db-label {
  font-weight: 600;
  text-align: right;
}
.diagram-bars .db-bar {
  height: 20px;
  border-radius: 3px;
  background: var(--ds-info);
}
.diagram-bars .db-bar.db-warn { background: var(--ds-warn); }
.diagram-bars .db-bar.db-danger { background: var(--ds-danger); }
.diagram-bars .db-val {
  font-size: 0.85em;
  opacity: 0.7;
}

/* Limitations / feature box (for RDG limitations, etc.) */
.diagram-limits {
  margin: 1em 0;
  border: 2px solid var(--ds-danger);
  border-radius: 0.5rem;
  overflow: hidden;
  font-size: 0.85em;
}
.diagram-limits .dl-title {
  padding: 0.4em 1em;
  font-weight: 700;
  background: rgba(var(--ds-danger-rgb),.08);
  border-bottom: 1px solid rgba(var(--ds-danger-rgb),.2);
  color: var(--ds-danger);
  font-family: ui-monospace, SFMono-Regular, monospace;
}
.diagram-limits .dl-item {
  padding: 0.45em 1em;
  border-bottom: 1px solid var(--color-neutral-200, #e5e5e5);
  line-height: 1.6;
}
:is(.dark,.scheme-congo) .diagram-limits .dl-item {
  border-color: var(--color-neutral-800);
}
.diagram-limits .dl-item:last-child { border-bottom: none; }
.diagram-limits .dl-x {
  color: var(--ds-danger);
  font-weight: 700;
  margin-right: 0.4em;
}

/* Steps / walkthrough */
.diagram-steps {
  margin: 1em 0;
  font-size: 0.82em;
}
.diagram-steps .ds-step {
  display: flex;
  gap: 0.75em;
  padding: 0.6em 0;
  border-bottom: 1px dashed var(--color-neutral-300, #d4d4d4);
  line-height: 1.6;
}
:is(.dark,.scheme-congo) .diagram-steps .ds-step {
  border-color: var(--color-neutral-700);
}
.diagram-steps .ds-step:last-child { border-bottom: none; }
.diagram-steps .ds-num {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--ds-info);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85em;
  flex-shrink: 0;
  margin-top: 1px;
}

/* Code-diff shortcode — styled to match .highlight-wrapper / Chroma */
.code-diff {
  margin: 1.7142857em 0;      /* matches .highlight-wrapper */
  border-radius: 0.375rem;    /* rounded-md, same as .highlight-wrapper */
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px -1px rgba(0,0,0,.1); /* shadow, same as .highlight-wrapper */
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.82em;
  line-height: 1.7;
  background: #0d1117;        /* matches .chroma bg */
  color: #D4D4D4;
}
.code-diff .cd-title {
  padding: 0.5rem 1rem;
  font-weight: 600;
  background: #0d1117;
  border-bottom: 1px solid #262626;
  font-size: 0.95em;
}
.code-diff .cd-pre {
  margin: 0;
  padding: 0;
  font: inherit;
  color: inherit;
  background: transparent;
  border: none;
  white-space: pre;
  overflow: visible;
}
.code-diff .cd-line {
  display: flex;
  white-space: pre;
  border-left: 3px solid transparent;
  padding: 0.05em 1em 0.05em 0;
}
.code-diff .cd-gutter {
  flex-shrink: 0;
  width: 2em;
  text-align: center;
  user-select: none;
  opacity: .5;
  color: inherit;
}
.code-diff .cd-code {
  flex: 1;
  min-width: 0;
  padding-left: .4em;
}
.code-diff .cd-add {
  background: rgba(var(--ds-success-rgb),.22);
  border-left-color: var(--ds-success);
}
.code-diff .cd-add .cd-gutter {
  color: var(--ds-success);
  opacity: .8;
}
.code-diff .cd-remove {
  background: rgba(var(--ds-danger-rgb),.18);
  border-left-color: var(--ds-danger);
}
.code-diff .cd-remove .cd-gutter {
  color: var(--ds-danger);
  opacity: .8;
}
.code-diff .cd-context {
  opacity: 0.35;
}

/* ── Diff syntax highlighting (VS Dark C++ palette) ── */
.code-diff .cd-code { color: #D4D4D4; }           /* base text */
.code-diff .cd-kw   { color: #569CD6; }           /* keywords: if, return, class, const */
.code-diff .cd-type { color: #4EC9B0; }           /* types: void, int, uint32_t, bool */
.code-diff .cd-str  { color: #CE9178; }           /* string literals */
.code-diff .cd-num  { color: #B5CEA8; }           /* numeric literals */
.code-diff .cd-cmt  { color: #6A9955; font-style: italic; }  /* comments */
.code-diff .cd-fn   { color: #DCDCAA; }           /* function/method calls */
.code-diff .cd-member { color: #DCDCAA; }         /* member access: .name / ->name */
.code-diff .cd-prep { color: #C586C0; }           /* preprocessor: #include, #define */
.code-diff .cd-op   { color: #D4D4D4; }           /* operators, punctuation, brackets */

/* Collapsible code-diff wrapper — matches .highlight-wrapper */
.code-diff-collapsible {
  margin: 1.7142857em 0;
  border-radius: 0.375rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px -1px rgba(0,0,0,.1);
}
.code-diff-collapsible > summary {
  cursor: pointer;
  list-style: none;
  display: flex;
  align-items: center;
  gap: .6em;
  padding: .55em 1em;
  background: #0d1117;
  color: #e6edf3;
  font-family: ui-monospace, SFMono-Regular, monospace;
  font-size: .82em;
  font-weight: 600;
  transition: background .15s;
}
.code-diff-collapsible > summary::-webkit-details-marker { display: none; }
.code-diff-collapsible > summary::marker { display: none; content: ""; }
.code-diff-collapsible > summary::before {
  content: '▶';
  font-size: .7em;
  transition: transform .2s;
}
.code-diff-collapsible[open] > summary::before {
  transform: rotate(90deg);
}
.code-diff-collapsible > summary:hover {
  background: #161b22;
}
.code-diff-summary__title { flex: 1; }
.code-diff-summary__meta {
  font-weight: 400;
  font-size: .88em;
  opacity: .5;
}
.code-diff-collapsible .code-diff {
  margin: 0;
  border-radius: 0;
}
.code-diff-collapsible .cd-title {
  display: none; /* title shown in summary instead */
}

/* Feature comparison table */
.diagram-ftable {
  margin: 1em 0;
  border: 2px solid var(--color-neutral-300, #d4d4d4);
  border-radius: 0.5rem;
  overflow: hidden;
  font-size: 0.82em;
}
:is(.dark,.scheme-congo) .diagram-ftable {
  border-color: var(--color-neutral-600);
}
.diagram-ftable table {
  width: 100%;
  border-collapse: collapse;
}
.diagram-ftable th {
  padding: 0.5em 0.8em;
  text-align: left;
  font-weight: 700;
  font-family: ui-monospace, SFMono-Regular, monospace;
  background: var(--color-neutral-100, #f5f5f5);
  border-bottom: 2px solid var(--color-neutral-300, #d4d4d4);
}
:is(.dark,.scheme-congo) .diagram-ftable th {
  background: var(--color-neutral-800);
  border-color: var(--color-neutral-600);
}
.diagram-ftable td {
  padding: 0.4em 0.8em;
  border-bottom: 1px solid var(--color-neutral-200, #e5e5e5);
}
:is(.dark,.scheme-congo) .diagram-ftable td {
  border-color: var(--color-neutral-800);
}
.diagram-ftable tr:last-child td { border-bottom: none; }

/* Two-phase diagram (Declaration/Compile/Execution) */
.diagram-phases {
  display: flex;
  gap: 0.5em;
  margin: 1em 0;
  flex-wrap: wrap;
  font-size: 0.82em;
}
.diagram-phases .dph-col {
  flex: 1;
  min-width: 160px;
  border: 2px solid var(--color-neutral-300, #d4d4d4);
  border-radius: 0.5rem;
  overflow: hidden;
}
:is(.dark,.scheme-congo) .diagram-phases .dph-col {
  border-color: var(--color-neutral-600);
}
.diagram-phases .dph-title {
  padding: 0.4em 0.7em;
  font-weight: 700;
  font-family: ui-monospace, SFMono-Regular, monospace;
  background: var(--color-neutral-100, #f5f5f5);
  border-bottom: 1px solid var(--color-neutral-300, #d4d4d4);
  font-size: 0.95em;
}
:is(.dark,.scheme-congo) .diagram-phases .dph-title {
  background: var(--color-neutral-800);
  border-color: var(--color-neutral-600);
}
.diagram-phases .dph-body {
  padding: 0.5em 0.7em;
  line-height: 1.7;
}

/* Inline UE5 macro visualization */
.diagram-macro {
  margin: 1em 0;
  display: flex;
  gap: 0.75em;
  align-items: center;
  flex-wrap: wrap;
  font-size: 0.82em;
}
.diagram-macro .dm-code {
  padding: 0.5em 0.8em;
  border-radius: 0.5rem;
  background: var(--color-neutral-100, #f5f5f5);
  border: 2px solid var(--color-neutral-300, #d4d4d4);
  font-family: ui-monospace, SFMono-Regular, monospace;
  line-height: 1.7;
  font-weight: 500;
}
:is(.dark,.scheme-congo) .diagram-macro .dm-code {
  background: var(--color-neutral-800);
  border-color: var(--color-neutral-600);
}
.diagram-macro .dm-arrow {
  font-size: 1.6em;
  color: var(--ds-info-light);
}
.diagram-macro .dm-result {
  padding: 0.5em 0.8em;
  border-radius: 0.5rem;
  border: 2px solid var(--ds-info);
  background: rgba(var(--ds-info-rgb),.08);
  font-family: ui-monospace, SFMono-Regular, monospace;
  line-height: 1.7;
}

/* ═══ Footer (ft-*) — extracted from inline styles ═══════════ */
.ft {
  margin-top: 0; background: rgba(0,0,0,.35); padding: 0 3em;
}
.ft-wrap {
  position: relative; margin-left: -3em; margin-right: -3em; overflow: hidden;
}
/* Glow orbs */
.ft-glow { position: absolute; inset: 0; pointer-events: none; }
.ft-glow-main {
  position: absolute; left: 50%; top: 12%; transform: translate(-50%,-50%);
  width: 600px; height: 600px; border-radius: 50%;
  background: radial-gradient(circle, rgba(var(--ds-accent-rgb),.22) 0%, rgba(var(--ds-accent-rgb),.08) 20%, rgba(var(--ds-accent-rgb),.02) 40%, transparent 65%);
  filter: blur(30px);
}
.ft-glow-core {
  position: absolute; left: 50%; top: 12%; transform: translate(-50%,-50%);
  width: 160px; height: 160px; border-radius: 50%;
  background: radial-gradient(circle, rgba(255,245,230,.12) 0%, rgba(var(--ds-accent-rgb),.06) 50%, transparent 80%);
  filter: blur(25px);
}
.ft-glow-left {
  position: absolute; left: 15%; top: 20%; width: 180px; height: 180px; border-radius: 50%;
  background: radial-gradient(circle, rgba(var(--ds-accent-rgb),.07) 0%, transparent 65%);
  filter: blur(50px);
}
.ft-glow-right {
  position: absolute; right: 15%; top: 18%; width: 150px; height: 150px; border-radius: 50%;
  background: radial-gradient(circle, rgba(var(--ds-accent-rgb),.05) 0%, transparent 65%);
  filter: blur(45px);
}
.ft-glow-fade {
  position: absolute; inset: 0;
  background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,.06) 20%, rgba(0,0,0,.15) 40%, rgba(0,0,0,.25) 60%, rgba(0,0,0,.32) 80%, rgba(0,0,0,.35) 100%);
}
/* CTA */
.ft-cta {
  position: relative; text-align: center; padding: 5em 3em 2.5em; background: rgba(0,0,0,.2);
}
.ft-cta-title { margin: 0 0 .3em; font-size: 1.55em; font-weight: 800; line-height: 1.2; }
.ft-cta-desc {
  margin: 0 0 1.4em; opacity: .5; font-size: .88em; line-height: 1.5;
  max-width: 380px; margin-left: auto; margin-right: auto;
}
.ft-cta-btn {
  display: inline-flex; align-items: center; gap: .55em;
  padding: .6em 1.6em; border-radius: 50px;
  background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.85); font-weight: 600; font-size: .82em;
  text-decoration: none; letter-spacing: .02em;
  transition: background .25s ease, border-color .25s ease, color .25s ease, transform .2s ease;
}
.ft-cta-btn svg { width: 1.1em; height: 1.1em; fill: currentColor; }
.ft-cta-btn:hover {
  background: rgba(255,255,255,.14); border-color: rgba(255,255,255,.22);
  color: #fff; transform: translateY(-1px);
}
/* Columns */
.ft-cols-wrap { position: relative; padding: 1.2em 6em; }
.ft-cols { display: flex; gap: 3em; flex-wrap: wrap; align-items: flex-start; }
.ft-col { min-width: 180px; flex: 1; }
.ft-col--center { text-align: center; min-width: 200px; }
.ft-col--right { text-align: right; min-width: 140px; }
.ft-col-label {
  font-size: .72em; font-weight: 700; text-transform: uppercase;
  letter-spacing: .08em; opacity: .45; margin-bottom: .7em;
}
.ft-socials { display: flex; gap: .6em; align-items: center; }
.ft-social-icon {
  display: flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 50%;
  background: rgba(255,255,255,.08); color: inherit; opacity: .7;
  transition: opacity .2s ease, background .2s ease, transform .2s ease;
}
.ft-social-icon svg { width: 16px; height: 16px; fill: currentColor; }
.ft-social-icon:hover { opacity: 1; background: rgba(255,255,255,.15); transform: translateY(-2px); }
.ft-contact-row { display: flex; align-items: center; justify-content: center; gap: .4em; }
.ft-contact-row svg { width: 14px; height: 14px; fill: currentColor; opacity: .5; flex-shrink: 0; }
.ft-contact-row a { font-size: .88em; color: inherit; text-decoration: none; opacity: .7; transition: opacity .15s; }
.ft-contact-row a:hover { opacity: 1; }
.ft-links { list-style: none; padding: 0; margin: 0; }
.ft-links li { margin-bottom: .4em; }
.ft-links a {
  font-size: .88em; color: inherit; text-decoration: none; opacity: .7;
  transition: opacity .15s ease;
}
.ft-links a:hover { opacity: 1; }
/* Bottom bar */
.ft-bottom {
  position: relative; border-top: 1px solid rgba(255,255,255,.06);
  padding: 1.2em 6em; display: flex; justify-content: space-between;
  align-items: center; flex-wrap: wrap; gap: .5em;
}
.ft-copy { font-size: .75em; opacity: .35; margin: 0; }
.ft-disclaimer { font-size: .68em; opacity: .25; margin: 0; text-align: right; }

@media (max-width: 768px) {
  .ft { padding: 0 1em; }
  .ft-cols-wrap { padding: 1.2em 1em; }
  .ft-cols { gap: 1.5em; }
  .ft-col--center, .ft-col--right { text-align: left; }
  .ft-bottom { padding: 1.2em 1em; flex-direction: column; align-items: flex-start; }
}

/* ── Shimmer animation (used on landing + about hero borders) ── */
@keyframes shimmer {
  0%   { background-position: -200% center; }
  100% { background-position: 200% center; }
}

/* ── Interactive widget chrome ── */
/* Outer container — subtle card with hover awareness */
.interactive-widget{position:relative;margin:1.5em 0;border-radius:.75rem;overflow:hidden;background:var(--color-neutral-50,#fafafa);border:1px solid transparent;transition:border-color .3s,box-shadow .3s}
.interactive-widget:hover{border-color:transparent;box-shadow:none}
:is(.dark,.scheme-congo) .interactive-widget{background:var(--color-neutral-800,#262626)}
:is(.dark,.scheme-congo) .interactive-widget:hover{border-color:transparent;box-shadow:none}

/* Tiny corner hint — signals interactivity without shouting */
.interactive-widget::after{content:"interactive";position:absolute;top:.45em;right:.55em;font-size:.56em;font-weight:500;letter-spacing:.04em;text-transform:uppercase;color:var(--color-neutral-400,#9ca3af);opacity:.55;pointer-events:none;transition:opacity .3s}
:is(.dark,.scheme-congo) .interactive-widget::after{color:var(--color-neutral-500)}
.interactive-widget:hover::after{opacity:0}

/* Header — removed (titles are gone; only body remains) */
.widget-header{display:none}
.widget-body{padding:.75em .75em .6em}
.widget-info{font-family:ui-monospace,SFMono-Regular,monospace;font-size:.78em;margin:.35em 0;line-height:1.7;opacity:.75}

/* Toolbar — single subtle row beneath content */
.widget-toolbar{display:flex;align-items:center;justify-content:space-between;gap:.5em;flex-wrap:wrap;margin-top:.5em;padding-top:.5em;border-top:1px solid color-mix(in srgb,currentColor 8%,transparent)}
.widget-toolbar-left{display:flex;align-items:center;gap:.35em;flex-wrap:wrap}
.widget-toolbar-right{display:flex;align-items:center;gap:.4em;flex-wrap:wrap}

/* ── Shared interactable pulse ── */
@keyframes interact-pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}

/* Pills — ghost-style labels that don't scream */
.widget-pill{font-size:.72em;padding:.25em .65em;border:1px solid var(--color-neutral-300,#d1d5db);border-radius:999px;background:transparent;cursor:pointer;color:var(--color-neutral-500,#6b7280);font-weight:500;transition:all .15s;line-height:1.3}
.widget-pill:hover{color:var(--color-neutral-700,#374151);border-color:var(--color-neutral-400)}
:is(.dark,.scheme-congo) .widget-pill{border-color:var(--color-neutral-600);color:var(--color-neutral-400)}
:is(.dark,.scheme-congo) .widget-pill:hover{color:var(--color-neutral-200);border-color:var(--color-neutral-500)}

/* Legacy .widget-btn kept for action buttons (Reset, Next) */
.widget-btn{font-size:.72em;padding:.25em .7em;border:1px solid var(--color-neutral-300,#d1d5db);border-radius:.375rem;background:transparent;cursor:pointer;color:var(--color-neutral-600,#4b5563);font-weight:500;transition:all .15s;line-height:1.3}
.widget-btn:hover{color:var(--color-neutral-800);border-color:var(--color-neutral-400)}
:is(.dark,.scheme-congo) .widget-btn{border-color:var(--color-neutral-600);color:var(--color-neutral-400)}
:is(.dark,.scheme-congo) .widget-btn:hover{color:var(--color-neutral-200);border-color:var(--color-neutral-500)}

/* Primary action button — continuous pulse draws the eye */
.widget-btn-primary{background:var(--ds-info)!important;color:#fff!important;border-color:var(--ds-info)!important;font-weight:600!important;border-radius:.375rem;animation:interact-pulse 1.4s ease-in-out infinite}
.widget-btn-primary:hover{filter:brightness(1.15);animation:none}
.widget-btn-primary:disabled{opacity:.4;cursor:default;filter:none;animation:none}
.widget-btn-row{display:flex;gap:.5em;align-items:center}


/* ── Card hover lift effect ── */
.fg-hoverable {
  transition: transform .22s ease, box-shadow .22s ease;
}
.fg-hoverable:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,.1);
}
:is(.dark,.scheme-congo) .fg-hoverable:hover {
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
}

/* ── Mobile responsive overrides ──────────────── */
@media (max-width: 768px) {
  /* Diagram bars: stack into 2 columns on small screens */
  .diagram-bars {
    grid-template-columns: 80px 1fr 1fr 1fr !important;
    font-size: .7em !important;
    gap: .2em .3em !important;
  }
  /* Pipeline steps */
  .diagram-pipeline {
    flex-wrap: wrap;
  }
  /* Boxes */
  .diagram-box {
    font-size: .9em;
  }
  /* Tables: horizontal scroll */
  .prose table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  /* Code blocks */
  pre {
    font-size: .8em !important;
  }
}

@media (max-width: 500px) {
  .diagram-bars {
    grid-template-columns: 60px 1fr 1fr 1fr !important;
    font-size: .65em !important;
  }
  .diagram-box {
    font-size: .82em;
    padding: .6em;
  }
}

/* ═══════════════════════════════════════════════════════════
   FLOW CHARGING SYSTEM
   Tokens → schemes/deepspark.css (--ds-flow-*)
   Size   dash:gap  offset  use-case
   lg     14  34    –48     DAG / pipeline / big graph edges
   md      8  20    –28     decision-tree / fence arrows
   sm      5  12    –17     inline decorative arrows / minimap
   ═══════════════════════════════════════════════════════════ */

@keyframes flow-lg { to { stroke-dashoffset: -48 } }
@keyframes flow-md { to { stroke-dashoffset: -28 } }
@keyframes flow-sm { to { stroke-dashoffset: -17 } }

/* Base — every flow overlay needs this */
.flow {
  pointer-events: none;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  opacity: var(--ds-flow-opacity, .3);
  stroke: var(--ds-flow, #93c5fd);
}

/* Size variants */
.flow-lg   { stroke-width: 2;   stroke-dasharray: 14 34; animation: flow-lg var(--ds-flow-speed, 3s) linear infinite }
.flow-md   { stroke-width: 2;   stroke-dasharray: 8 20;  animation: flow-md var(--ds-flow-speed, 3s) linear infinite }
.flow-mini { stroke-width: 1.2; stroke-dasharray: 5 12;  animation: flow-sm 2.8s linear infinite }

/* Color variants (default is blue via .flow) */
.flow-green   { stroke: var(--ds-flow-ok, #4ade80) }

/* Speed modifiers — stagger identical edges for visual variety */
.flow-d1 { animation-duration: 2.4s }
.flow-d2 { animation-duration: 2.8s }
.flow-d3 { animation-duration: 1.6s }
.flow-d4 { animation-duration: 3.2s }
.flow-d5 { animation-duration: 2s }
.flow-d6 { animation-duration: 2.6s }
.flow-d7 { animation-duration: 1.5s }
.flow-d8 { animation-duration: 1.8s }

/* ═══════════════════════════════════════════════════════════════════
   Global VS Dark C++ palette — override Chroma github-dark so that
   full-source blocks and code-diffs look identical.
   ═══════════════════════════════════════════════════════════════════ */
html.dark {
  /* Base foreground */
  .chroma { color: #D4D4D4; background-color: #0d1117; }

  /* Keywords → blue */
  .chroma .k,
  .chroma .kd,
  .chroma .kn,
  .chroma .kr,
  .chroma .kt { color: #569CD6; font-weight: normal; }

  /* Keyword constants (true, false, nullptr) → blue */
  .chroma .kc,
  .chroma .kp { color: #569CD6; }

  /* Types / classes → teal */
  .chroma .nc,
  .chroma .no { color: #4EC9B0; font-weight: normal; }

  /* Functions → yellow */
  .chroma .nf,
  .chroma .fm { color: #DCDCAA; font-weight: normal; }

  /* Decorators → purple (matches preprocessor feel) */
  .chroma .nd { color: #C586C0; font-weight: normal; }

  /* Namespace → teal */
  .chroma .nn { color: #4EC9B0; }

  /* Variables → light blue */
  .chroma .nv,
  .chroma .vc,
  .chroma .vg,
  .chroma .vi,
  .chroma .vm { color: #9CDCFE; }

  /* Entity / builtins */
  .chroma .ni { color: #4EC9B0; }
  .chroma .nb,
  .chroma .bp { color: #DCDCAA; }

  /* Labels */
  .chroma .nl { color: #9CDCFE; font-weight: normal; }

  /* Properties */
  .chroma .py { color: #9CDCFE; }

  /* Tags (mostly irrelevant for C++) */
  .chroma .nt { color: #569CD6; }

  /* Strings → warm orange */
  .chroma .s,
  .chroma .sa,
  .chroma .sb,
  .chroma .sc,
  .chroma .dl,
  .chroma .sd,
  .chroma .s2,
  .chroma .se,
  .chroma .sh,
  .chroma .si,
  .chroma .sx,
  .chroma .sr,
  .chroma .s1,
  .chroma .ss { color: #CE9178; }

  /* Numbers → light green */
  .chroma .l,
  .chroma .ld,
  .chroma .m,
  .chroma .mb,
  .chroma .mf,
  .chroma .mh,
  .chroma .mi,
  .chroma .il,
  .chroma .mo { color: #B5CEA8; }

  /* Operators → light gray (not bold) */
  .chroma .o,
  .chroma .ow { color: #D4D4D4; font-weight: normal; }

  /* Punctuation */
  .chroma .p { color: #D4D4D4; }

  /* Comments → green italic */
  .chroma .c,
  .chroma .ch,
  .chroma .cm,
  .chroma .c1,
  .chroma .cs { color: #6A9955; font-style: italic; font-weight: normal; }

  /* Preprocessor → purple */
  .chroma .cp,
  .chroma .cpf { color: #C586C0; font-weight: normal; font-style: normal; }

  /* Error */
  .chroma .err { color: #F44747; }

  /* Generic diff (if Hugo ever renders inline diffs) */
  .chroma .gd { color: #CE9178; background-color: rgba(244,71,71,.15); }
  .chroma .gi { color: #B5CEA8; background-color: rgba(78,201,176,.15); }
}

/* ═══════════════════════════════════════════════════════════════
   HOMEPAGE HERO
   Full-viewport particle-wave hero with CTAs
   ═══════════════════════════════════════════════════════════════ */
.ds-hero {
  position: relative;
  width: 100vw;
  margin-left: calc(-50vw + 50%);
  min-height: 100vh;
  min-height: 100dvh;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  overflow: hidden;
  background: #0a0806;
}

/* ── Particle canvas ─────────────────────────────────────────── */
#hero-particles {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
}

/* ── Vignette overlay for depth ──────────────────────────────── */
.ds-hero-overlay {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background:
    radial-gradient(ellipse 120% 80% at 50% 40%, transparent 30%, rgba(11,11,14,.65) 70%, rgba(11,11,14,.92) 100%),
    linear-gradient(to bottom, transparent 60%, rgba(11,11,14,.9) 100%);
}

/* ── Content layer ───────────────────────────────────────────── */
.ds-hero-content {
  position: relative;
  z-index: 2;
  text-align: center;
  padding: 0 2rem;
  max-width: 760px;
}

.ds-hero-heading {
  font-size: clamp(2.2rem, 5vw, 3.8rem);
  font-weight: 800;
  line-height: 1.15;
  color: #f5f5f7;
  letter-spacing: -.02em;
  margin: 0 0 .6em;
}

.ds-hero-accent {
  background: linear-gradient(90deg, var(--ds-orange), var(--ds-gold));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.ds-hero-sub {
  font-size: clamp(1rem, 2vw, 1.3rem);
  color: rgba(245,245,247,.55);
  margin: 0 0 2.4em;
  line-height: 1.6;
  font-weight: 400;
}

/* ── CTA buttons ─────────────────────────────────────────────── */
.ds-hero-ctas {
  display: flex;
  gap: 1.1em;
  justify-content: center;
  flex-wrap: wrap;
}

.ds-hero-btn {
  display: inline-flex;
  align-items: center;
  gap: .5em;
  font-size: .95rem;
  font-weight: 700;
  letter-spacing: .04em;
  text-transform: uppercase;
  padding: .8em 2em;
  border-radius: 60px;
  text-decoration: none !important;
  transition: transform .2s ease, box-shadow .25s ease, background .25s ease, color .2s ease;
  cursor: pointer;
}
.ds-hero-btn:hover { transform: translateY(-2px); }
.ds-hero-btn:active { transform: translateY(0); }

.ds-hero-btn--primary {
  background: var(--ds-orange);
  color: #0b0b0e;
  box-shadow: 0 4px 20px rgba(var(--ds-orange-rgb), .35);
}
.ds-hero-btn--primary:hover {
  background: var(--ds-gold);
  box-shadow: 0 8px 28px rgba(var(--ds-gold-rgb), .4);
  color: #0b0b0e !important;
}

.ds-hero-btn--secondary {
  background: rgba(245,245,247,.06);
  color: rgba(245,245,247,.85);
  border: 1px solid rgba(245,245,247,.18);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.ds-hero-btn--secondary:hover {
  background: rgba(245,245,247,.12);
  border-color: rgba(245,245,247,.32);
  box-shadow: 0 4px 18px rgba(0,0,0,.4);
  color: #f5f5f7 !important;
}

/* ── Scroll-down hint ────────────────────────────────────────── */
.ds-hero-scroll-hint {
  position: absolute;
  bottom: 1.8rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  color: rgba(245,245,247,.28);
  animation: ds-bounce 2.2s ease-in-out infinite;
}
@keyframes ds-bounce {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50%      { transform: translateX(-50%) translateY(8px); }
}

/* ── Featured section ─────────────────────────────────────────── */
.ds-featured {
  position: relative;
  margin-top: 0;
  padding: 4rem 0 3rem;
  /* Full-bleed: break out of the content container */
  width: 100vw;
  margin-left: calc(-50vw + 50%);
  box-sizing: border-box;
  /* Layered gradient background — warm neutral darks */
  background:
    radial-gradient(ellipse 70% 50% at 50% 0%, rgba(var(--ds-accent-rgb), .05) 0%, transparent 70%),
    linear-gradient(180deg, #08090e 0%, #0c0e14 40%, #0e1016 100%);
}
/* Subtle top divider line across the full width */
.ds-featured::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 10%,
    rgba(var(--ds-accent-rgb), .2) 35%,
    rgba(var(--ds-accent-rgb), .35) 50%,
    rgba(var(--ds-accent-rgb), .2) 65%,
    transparent 90%
  );
}
/* Inner container to constrain content width */
.ds-featured-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem;
}
.ds-featured-heading {
  font-size: 1.3rem;
  font-weight: 700;
  margin: 0 0 .4em;
  color: rgba(245,245,247,.92);
  letter-spacing: -.01em;
  text-align: center;
}
.ds-featured-sub {
  text-align: center;
  font-size: .88rem;
  color: rgba(220,215,210,.38);
  margin: 0 0 2.2em;
  font-weight: 400;
}
@media (max-width: 700px) {
  .ds-featured { padding: 2.5rem 0 2rem; }
  .ds-featured-heading { font-size: 1.15rem; }
  .ds-featured-sub { font-size: .82rem; margin-bottom: 1.6em; }
}

/* ── Responsive hero ─────────────────────────────────────────── */
@media (max-width: 600px) {
  .ds-hero-content { padding: 0 1.2rem; }
  .ds-hero-btn { font-size: .85rem; padding: .7em 1.6em; }
  .ds-hero-ctas { gap: .8em; }
}
